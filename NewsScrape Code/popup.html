<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>News Scraper by Fin McKenzie</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    /* Enhanced styling with white background and royal blue accents */
    body { 
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
      margin: 0; 
      padding: 15px; 
      width: 380px; 
      background: #ffffff; 
      color: #333333; 
      border-radius: 8px;
    }
    h1 { 
      font-size: 20px; 
      margin-bottom: 12px; 
      text-align: center; 
      color: #1e3a8a; 
      font-weight: 600;
    }
    .controls { 
      display: flex; 
      gap: 8px; 
      justify-content: center; 
      margin-bottom: 12px; 
    }
    button { 
      cursor: pointer; 
      border: none; 
      border-radius: 6px; 
      padding: 8px 12px; 
      font-weight: 500;
      transition: all 0.2s ease;
    }
    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 2px 8px rgba(30, 58, 138, 0.2);
    }
    #scrape-btn { 
      background: #1e3a8a; 
      color: #fff; 
      flex: 1; 
    }
    #scrape-btn:hover {
      background: #1e40af;
    }
    #auth-btn { 
      background: #f8fafc; 
      color: #1e3a8a; 
      border: 2px solid #1e3a8a;
      flex: 1; 
      display: flex; 
      align-items: center; 
      gap: 4px; 
      justify-content: center; 
    }
    #auth-btn:hover {
      background: #f1f5f9;
    }
    #auth-btn.connected {
      background: #dcfce7;
      border-color: #16a34a;
      color: #16a34a;
    }
    .secondary-btn { 
      background: #e2e8f0; 
      color: #475569; 
      font-size: 12px; 
      border: 1px solid #cbd5e1;
    }
    .secondary-btn:hover {
      background: #cbd5e1;
    }
    .status { 
      text-align: center; 
      margin: 10px 0; 
      padding: 8px; 
      border-radius: 6px; 
      font-weight: 500;
    }
    .status.ready { 
      background: #f1f5f9; 
      color: #64748b; 
      border: 1px solid #e2e8f0;
    }
    .status.scraping { 
      background: #fef3c7; 
      color: #d97706; 
      border: 1px solid #fbbf24;
    }
    .status.success { 
      background: #dcfce7; 
      color: #16a34a; 
      border: 1px solid #4ade80;
    }
    .status.error { 
      background: #fee2e2; 
      color: #dc2626; 
      border: 1px solid #f87171;
    }
    .progress-bar { 
      width: 100%; 
      height: 8px; 
      background: #e2e8f0; 
      border-radius: 4px; 
      overflow: hidden; 
      margin-bottom: 6px; 
    }
    .progress-fill {
      height: 8px;
      background: linear-gradient(90deg, #1e3a8a, #3b82f6);
      width: 0;
      transition: width 0.3s ease;
    }
    #progress-text { 
      font-size: 12px; 
      display: block; 
      text-align: right; 
      margin-bottom: 12px; 
      color: #64748b;
    }
    .sources, .keywords { 
      margin-bottom: 16px; 
      background: #f8fafc;
      padding: 12px;
      border-radius: 8px;
      border: 1px solid #e2e8f0;
    }
    .sources h3, .keywords h3 { 
      margin-bottom: 8px; 
      font-size: 16px; 
      color: #1e3a8a; 
      font-weight: 600;
    }
    .section-controls { 
      display: flex; 
      gap: 8px; 
      margin-bottom: 8px; 
    }
    .section-controls button { 
      font-size: 12px; 
      padding: 6px 10px; 
      background: #1e3a8a; 
      color: #fff; 
      border-radius: 4px;
    }
    .section-controls button:hover {
      background: #1e40af;
    }
    .sources label, .keywords label { 
      display: block; 
      margin: 4px 0; 
      font-size: 14px; 
      cursor: pointer;
      padding: 2px 0;
    }
    .sources label:hover {
      background: #e2e8f0;
      border-radius: 4px;
      padding: 2px 4px;
    }
    input[type="checkbox"] { 
      margin-right: 8px; 
      accent-color: #1e3a8a; 
      transform: scale(1.1);
    }
    #keyword-tags { 
      display: flex; 
      flex-wrap: wrap; 
      gap: 8px; 
      margin-bottom: 10px; 
      min-height: 24px; 
    }
    .keyword-tag { 
      background: #1e3a8a; 
      color: white;
      padding: 6px 12px; 
      border-radius: 20px; 
      font-size: 12px; 
      display: flex; 
      align-items: center; 
      gap: 6px; 
      font-weight: 500;
    }
    .remove-keyword { 
      cursor: pointer; 
      font-weight: bold; 
      background: rgba(255,255,255,0.2);
      border-radius: 50%;
      width: 16px;
      height: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }
    .remove-keyword:hover {
      background: rgba(255,255,255,0.3);
    }
    .input-row { 
      display: flex; 
      gap: 6px; 
      margin-bottom: 10px; 
    }
    input[type="text"] { 
      flex: 1; 
      padding: 8px 10px; 
      border-radius: 6px; 
      border: 2px solid #e2e8f0; 
      color: #333; 
      background: #fff; 
      font-size: 14px;
    }
    input[type="text"]:focus {
      outline: none;
      border-color: #1e3a8a;
      box-shadow: 0 0 0 3px rgba(30, 58, 138, 0.1);
    }
    .add-btn { 
      background: #1e3a8a; 
      color: #fff; 
      padding: 8px 12px; 
      font-size: 12px; 
      font-weight: 500;
    }
    .add-btn:hover {
      background: #1e40af;
    }
    .empty-state { 
      text-align: center; 
      color: #94a3b8; 
      font-style: italic; 
      padding: 12px; 
      background: #f1f5f9; 
      border-radius: 6px; 
      margin-bottom: 10px; 
      border: 2px dashed #cbd5e1;
    }
    .custom-source { 
      background: #fff; 
      padding: 10px; 
      margin: 4px 0; 
      border-radius: 6px; 
      border: 1px solid #e2e8f0;
    }
    .custom-source:hover {
      border-color: #1e3a8a;
    }
    .custom-source-header { 
      display: flex; 
      justify-content: space-between; 
      align-items: center; 
    }
    .custom-source input[type="checkbox"] { 
      margin-right: 10px; 
    }
    .custom-source-name { 
      font-weight: 600; 
      color: #1e3a8a;
    }
    .custom-source-url { 
      font-size: 11px; 
      color: #64748b; 
      margin-top: 4px; 
      margin-left: 24px;
    }
    .remove-source { 
      background: #dc2626; 
      color: #fff; 
      border: none; 
      padding: 4px 8px; 
      border-radius: 4px; 
      font-size: 11px; 
      cursor: pointer; 
      font-weight: 500;
    }
    .remove-source:hover {
      background: #b91c1c;
    }
    .results-stats { 
      display: flex; 
      justify-content: space-between; 
      font-size: 12px; 
      color: #64748b; 
      margin-bottom: 8px; 
      font-weight: 500;
    }
    #results { 
      max-height: 200px; 
      overflow-y: auto; 
    }
    .doc-link { 
      display: block; 
      text-align: center; 
      background: linear-gradient(135deg, #1e3a8a, #3b82f6); 
      color: #fff; 
      padding: 12px; 
      text-decoration: none; 
      border-radius: 8px; 
      margin-top: 12px; 
      font-weight: 600;
      transition: all 0.2s ease;
    }
    .doc-link:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(30, 58, 138, 0.3);
    }
    #add-source-form {
      background: #fff;
      border: 2px solid #1e3a8a;
      padding: 12px;
      border-radius: 8px;
      margin-top: 8px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>News Scraper</h1>
    
    <div class="controls">
      <button id="scrape-btn">
        <span class="btn-icon">üöÄ</span>
        Launch Scraper
      </button>
      <button id="auth-btn">
        <span class="btn-icon">üîê</span>
        <span>Google Auth</span>
      </button>
      <button id="clear-auth" class="secondary-btn">Log Out</button> 
    </div>
    
    <div id="status" class="status ready">Ready</div>
    <div class="progress-bar">
      <div id="progress-fill" class="progress-fill"></div>
    </div>
    <div id="progress-text">0%</div>
    
    <div class="sources">
      <h3>Sources</h3>
      <div class="section-controls">
        <button id="select-all">Select All</button>
        <button id="add-source-btn">+ Add Site</button>
      </div>
      
      <div id="default-sources">
        <label><input type="checkbox" id="wsj-check">Wall Street Journal</label>
        <label><input type="checkbox" id="bloomberg-check">Bloomberg</label>
        <label><input type="checkbox" id="cnbc-check">CNBC</label>
        <label><input type="checkbox" id="nytimes-check">New York Times</label>
        <label><input type="checkbox" id="reuters-check">Reuters</label>
        <label><input type="checkbox" id="bbc-check">BBC</label>
        <label><input type="checkbox" id="cnn-check">CNN</label>
        <label><input type="checkbox" id="nbcnews-check">NBC News</label>
        <label><input type="checkbox" id="foxnews-check">Fox News</label>
        <label><input type="checkbox" id="washingtonpost-check">Washington Post</label>
        <label><input type="checkbox" id="guardian-check">The Guardian</label>
        <label><input type="checkbox" id="apnews-check">AP News</label>
        <label><input type="checkbox" id="npr-check">NPR</label>
        <label><input type="checkbox" id="aljazeera-check">Al Jazeera</label>
        <label><input type="checkbox" id="economist-check">The Economist</label>
        <label><input type="checkbox" id="forbes-check">Forbes</label>
        <label><input type="checkbox" id="usatoday-check">USA Today</label>
      </div>
      
      <div id="custom-sources"></div>
      
      <div id="add-source-form" style="display:none;">
        <div class="input-row">
          <input type="text" id="source-name-input" placeholder="Source name (e.g., TechCrunch)" />
        </div>
        <div class="input-row">
          <input type="text" id="source-url-input" placeholder="URL (e.g., https://techcrunch.com)" />
          <button id="save-source-btn" class="add-btn">Save</button>
          <button id="cancel-source-btn" class="secondary-btn">Cancel</button>
        </div>
      </div>
    </div>
    
    <div class="keywords">
      <h3>Keywords</h3>
      <div id="keyword-tags">
        <div class="empty-state" id="keyword-empty-state">
          No keywords added. Add keywords to filter articles.
        </div>
      </div>
      <div class="input-row">
        <input type="text" id="keyword-input" placeholder="Add keyword (e.g., tesla, battery, ev)" />
        <button id="add-keyword" class="add-btn">+ Add</button>
      </div>
    </div>
    
    <div class="results-stats">
      <span id="articles-count">0 articles</span>
      <span id="sources-count">0 sources</span>
    </div>
    <div id="results"></div>
  </div>
  
  <script src="popup.js"></script>
</body>
</html>